{% extends 'base.html' %}
{% load static %}

{% block content %}
<!--wrapper start-->
<div class="wrapper">
	<!--header-->
	<header id="header">
	<div class="carousel fade-carousel slide" data-ride="carousel" data-interval="4000" id="bs-carousel">
  <!-- Overlay -->
  <div class="overlay"></div>

  <!-- Indicators -->
  <ol class="carousel-indicators">
    <li data-target="#bs-carousel" data-slide-to="0" class="active"></li>
    <li data-target="#bs-carousel" data-slide-to="1"></li>
    <li data-target="#bs-carousel" data-slide-to="2"></li>
  </ol>
  
  <!-- Wrapper for slides -->
  <div class="carousel-inner">
    <div class="item slides active">
      <div class="slide-1"></div>
      <div class="hero">
        <hgroup>
		 <img src="{% static 'img/logo.png' %}" alt="logo"/>        
        </hgroup>
        
      </div>
    </div>
    <div class="item slides">
        <div class="slide-2"></div>
        <div class="hero">        
          <hgroup>
           <img src="{% static 'img/logo.png' %}" alt="logo"/>
          
          </hgroup>       
        
      </div>
    </div>
    <div class="item slides">
      <div class="slide-3"></div>
      <div class="hero">        
        <hgroup>
		 <img src="{% static 'img/logo.png' %}" alt="logo"/>
        
        </hgroup>
        
      </div>
    </div>
  </div> 


	<div class="menu" style="background: #F39C12; height: 65px;">
		<nav class="navbar navbar-wrapper"> 
      <div class="container">
            <div class="navbar-header">
        <button type="button" id="nav-toggle" class="navbar-toggle" data-toggle="collapse" data-target="#main-nav"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button>
        </div>
	    <div id="main-nav" class="collapse navbar-collapse">
			 <ul class="nav navbar-nav">
			  <li><a href="#header" class="scroll-link">Главная</a></li>
              <li><a href="{% url 'news' %}" class="menu-header-link">Новости</a></li>
			  <li><a href="{% url 'menu' %}" class="menu-header-link">Меню</a></li>
			  <li><a href="{% url 'gallery' %}" class="menu-header-link">Галерея</a></li>
			  <li><a href="#service" class="scroll-link">Услуги</a></li>
			  <li><a href="#footer" class="scroll-link">Контакты</a></li>
			  <li><a href="{% url 'reservation' %}" class="reservation-link">Забронировать столик</a></li>
			  {% if user.is_authenticated %}
			    <li><span class="nav-text">Привет, {{ user.username }}!</span></li>
			    <li><a href="{% url 'logout' %}" class="auth-link">Выйти</a></li>
			  {% else %}
			    <li><a href="{% url 'login' %}" class="auth-link">Войти</a></li>
			    <li><a href="{% url 'register' %}" class="auth-link">Регистрация</a></li>
			  {% endif %}
			</ul>
      </div>
      </div>  
		</nav>
	</div>		
	</header>

	<!--about us-->
	<section class="aboutus page-section" id="aboutUs">
	<div class="container">
	     <div class="heading">			
			<h2>О Нас</h2>			
			<h3>Кафе «Легенда» — это место, где можно провести время в уютной атмосфере, наслаждаясь вкусной едой и 
				живой музыкой. В кафе комфортно и взрослым, и детям, и семьям.</h3>
		</div>
		
		<div class="content">
			 
			<div class="about-text">
				<p>В давние времена, когда путнику встречался указывающий дорогу камень, он знал – это место знаковое. 
				Мало-помалу сюда стекались легенды, предания, сказы о событиях и людях.</p>

				<p>Так и «Легенда» приютилась в интересном местечке Орехово-Зуева – будто бы на развилке разных судеб и исторических наследий. 
				Здесь пересекаются и соседствуют главный православный собор Рождества Богородицы, школа и детские сады</p>

				<p>Легенда, как ей и положено своим названием, окутана лёгкой дымкой воспоминаний юности, с почтением хранит традиции родного города.
				С любовью и надеждой смотрит в будущее! А в настоящем «Легенда» как живой родник встретит вас гостеприимно и хлебосольно, В традициях русской кухни! 
				Наши повара знают и любят своё дело, пекут вкусные пироги, бариста сварит ароматный кофе, официанты угадают ваши вкусы, специалисты из разных областей знаний проведут мастер-классы и тематические посиделки.</p>

				<p>В кафе есть детская комната с настольными играми, что делает его идеальным местом для семейного отдыха.</p>

				<p>Английский клуб, книжный клуб, уютные вечера с живой музыкой, разнообразные мастер-классы привлекают в «Легенду» сотни поклонников в праздничные дни – вечеринки и дискотеки с ведущими не оставляют равнодушных гостей.</p>
				
				<p>В меню представлены разнообразные блюда традиционной русской и советской кухни – блины с припёком, драники с красной рыбой, вареники и пельмени ручной лепки с разными начинками, 
				авторские салаты – тёплый с печенью, «Легендарный» с индейкой на гриле, "Авача" с морепродуктами; классическиё бефтроганов готовится по старинному рецепту. 
				Борщ с пампушками и уха с расстегаем – любимые блюда постоянных гостей.</p>
				
				<p>Бар порадует поклонников ароматным кофе со свежей домашней выпечкой и авторскими лимонадами.</p>
			</div> 	
		</div> 	
	</div>
	</section>

    <div class="container">
         <div class="heading">			
        <h2><a href="{% url 'menu' %}" class="menu-header-link">Меню </a></h2>			
        <h3>Еда со вкусом. Традиционная русская кухня, знакомая с детства</h3>
      </div>
      
      <div class="content">
         
        <p>Завтраки - с 9:00 до 12:00</p> 
        <p>Комплексные обеды - с 12:00 до 16:00</p>
        <p>Банкетное меню</p>
        <p>В меню представлены разнообразные блюда, салат "Авача", драники с красной икрой и сметаной, комбо завтраки, сырники, вареники с разнообразной начинкой.</p>
        
  
      </div> 	
    </div>
    </section>
	
<section class="service page-section" id="service">
      <div class="container text-center">
         <div class="heading">			
			<h2>Услуги</h2>			
			<h3>Аренда для вашего мероприятия<br></h3>
		</div>

          <div class="row">
            <div class="col-md-4">
              <div class="box-area">
                  <h3>Зал "Чайная"</h3>
                  <h2>1000 рублей в час</h2>
                  <div class="box-area-text"></div>
                  <img src="static/img/gallery/tea.jpg"" alt="чайная" width="400px">
              </div>
            </div>
            <div class="col-md-4">
              <div class="box-area">
                  <h3>Зал "Кабинет"</h3>
                  <h2>400 рублей в час</h2>
                  <div class="box-area-text"> </div>
                  <img src="static/img/gallery/kab.jpg" alt="кабинет" width="400px">
              </div>
            </div>
                <div class="col-md-4">
              <div class="box-area">
                  <h3>Коммунальный стол</h3>
                  <h2>Депозит 300 рублей с человека</h2>
                  <div class="box-area-text"> </div>
                  <img src="static/img/gallery/kom.jpg" alt="коммунальный стол" width="400px">
              </div>
            </div>
            <div class="col-md-4">
              <div class="box-area">
                  <h3>Аренда кафе под банкет, свадьбу</h3>
                  <h2>от 20 до 50 человек от 120000 рублей</h2>
                  <div class="box-area-text"> </div>
                  <img src="static/img/gallery/main.jpg" alt="зал" width="400px">
              </div>
            </div>
            <div class="col-md-4">
              <div class="box-area">
                  <h3>Аренда веранды </h3>
                  <h2>от 15 человек от 40000 рублей 3 часа</h2>
                  <div class="box-area-text"> </div>
                  <img src="static/img/gallery/ver.jpg" alt="веранда" width="400px">
              </div>
            </div>
          </div>
      </div>
    </section>

<style>
.service {
    padding: 80px 0;
    background: #f9f9f9;
}

.box-area {
    background: #fff;
    padding: 30px;
    margin-bottom: 30px;
    border-radius: 8px;
    box-shadow: 0 2px 15px rgba(0,0,0,0.1);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    height: 100%;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-align: center;
}

.box-area:hover {
    transform: translateY(-5px);
    box-shadow: 0 5px 20px rgba(0,0,0,0.15);
}

.box-area h3 {
    color: #F39C12;
    font-size: 1.5em;
    margin-bottom: 15px;
    font-weight: 600;
}

.box-area h2 {
    color: #333;
    font-size: 1.2em;
    margin-bottom: 0;
    font-weight: 500;
}

.box-area-text {
    margin-top: 15px;
    color: #666;
}

.row {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    margin: 0 -15px;
}

.col-md-4 {
    padding: 0 15px;
    margin-bottom: 30px;
}
</style>
	 
  <section class="loyalty page-section" id="Loyalty">
		<div class="container">
		  <div class="heading">			
        <h2>Программа лояльности</h2>			
        <h3>Клуб друзей кафе "Легенда"</h3>
		</div> 
      <div class="loyalty-container">
        <div class="content">
          <p>Скидка 20% для студентов, пенсионеров и школьников! </p> 
          <p>Каждый день с 12:00 до 16:00 на основное меню.</p>
          <p>Любите выпечку? Мы тоже! После 20:00 на всю выпечку действует скидка 30%. Успейте попробовать наши фирменные десерты по сниженной цене!</p>
          <p>Подарочные сертификаты на сумму 1000, 3000 и 5000 рублей — отличный способ порадовать своих близких и друзей вкусными моментами в кафе "Легенда".</p>
          <p>Мы всегда рады видеть вас и готовы сделать ваше времяпрепровождение незабываемым!</p>
        </div>
        <div>
          <img src="{% static 'img/loyal.png' %}" alt="loyalty" width="400px">
        </div>
      </div>
	</div>
	</section>
	
	<!--feedback-->
	<section class="contact page-section" id="contact">
	<div class="container">
		<div class="heading">
				<h2>Обратная связь</h2>
				<h3>Мы будем рады каждому отзыву и пожеланию</h3>
		</div>
	</div>
	<div class="container w960">
      <div class="row justify-content-center">
		<div id="success-message" class="alert alert-success" style="display: none;">
			Ваше сообщение успешно отправлено!
		</div>
		<div id="error-message" class="alert alert-danger" style="display: none;">
			Произошла ошибка при отправке сообщения.
		</div>
        <form method="post" id="feedback-form" class="contact-form">
          {% csrf_token %}
          <input type="hidden" name="feedback_form" value="1">
          <div class="form-group">
            <label for="id_name">Имя:</label>
            <input type="text" name="name" id="id_name" class="form-control" placeholder="Ваше имя" required>
          </div>
          <div class="form-group">
            <label for="id_phone">Телефон:</label>
            <input type="tel" name="phone" id="id_phone" class="form-control" 
                   placeholder="+7 (___) ___-__-__" 
                   pattern="\+7\s?[\(]{0,1}9[0-9]{2}[\)]{0,1}\s?\d{3}[-]{0,1}\d{2}[-]{0,1}\d{2}"
                   required>
            <small class="form-text text-muted">Формат: +7 (9XX) XXX-XX-XX</small>
          </div>
          <div class="form-group">
            <label for="id_subject">Тема:</label>
            <input type="text" name="subject" id="id_subject" class="form-control" placeholder="Тема сообщения" required>
          </div>
          <div class="form-group">
            <label for="id_message">Сообщение:</label>
            <textarea name="message" id="id_message" class="form-control" rows="4" placeholder="Ваше сообщение" required></textarea>
          </div>
          <div class="text-center">
          <button type="submit" class="btn btn-primary">Отправить</button>
          </div>
        </form>
      </div>
    </div>
	</section>

<style>
.contact {
    padding: 60px 0;
    background: #f9f9f9;
}

.container.w960 {
    max-width: 75%;
    width: 75%;
    padding: 0 15px;
    margin: 0 auto;
}

.contact-form {
    background: white;
    padding: 25px;
    border-radius: 8px;
    box-shadow: 0 2px 15px rgba(0,0,0,0.1);
    max-width: 1200px;
    width: 100%;
    margin: 0 auto;
}

.form-group {
    margin-bottom: 15px;
}

.form-group label {
    display: block;
    margin-bottom: 3px;
    color: #333;
    font-weight: 500;
}

.form-group input,
.form-group textarea {
    width: 100%;
    padding: 8px;
    border: 1px solid #ddd;
    border-radius: 4px;
    font-size: 15px;
}

.form-group textarea {
    min-height: 100px;
    resize: vertical;
}

.btn-primary {
    background: #F39C12;
    border: none;
    padding: 10px 25px;
    font-size: 15px;
    transition: background 0.3s ease;
}

.btn-primary:hover {
    background: #d68910;
}

.alert {
    margin-bottom: 15px;
    padding: 12px;
    border-radius: 4px;
}

.alert-success {
    background: #d4edda;
    color: #155724;
    border: 1px solid #c3e6cb;
}

.alert-danger {
    background: #f8d7da;
    color: #4d1818;
    border: 1px solid #f5c6cb;
}

.form-text {
    color: #666;
    font-size: 0.85em;
    margin-top: 5px;
}

input[type="tel"] {
    font-family: inherit;
}


input[type="tel"]:valid {
    border-color: #28a745;
}
</style>

<section class="map page-section" id="map">
  <div class="container">
       <div class="heading">			
      <h2>Местонахождение</h2>			
      <h3>Схема проезда и  прохода к нам</h3>
    </div>
    
    <div class="content" style="display: flex; justify-content: center; gap: 20px; flex-wrap: wrap;">
        <div>
            <h3>Наш адрес</h3>
            <p>Россия, Московская область, г. Орехово-Зуево, ул. Матросова, д. 14</p>
            <script type="text/javascript" charset="utf-8" async src="https://api-maps.yandex.ru/services/constructor/1.0/js/?um=constructor%3A55c795513a8999a9c278384bbcd9280d49f9e222104041407a5d9fd60bd3b567&amp;width=500&amp;height=400&amp;lang=ru_RU&amp;scroll=true"></script>
        </div>
        <div>
            <h3>Рекомендуемая схема проезда</h3>
            <img src="static/img/map/map.jpg" alt="map scheme" width="500px" height="400px">
        </div>
    </div>
  </div>
</section>
  
	<!--footer-->
	<section class="footer" id="footer">
	<p class="text-center">
		<a href="#header" class="gototop"><i class="fa fa-angle-double-up fa-2x"></i></a>
	</p>
	<div class="container">
		<div class="footer-info">
			<div class="working-hours">
				<h4>Часы работы</h4>
				<p>Ежедневно с 9:00 до 22:00</p>
			</div>
			<div class="contact-info">
				<h4>Телефон</h4>
				<p><a href="tel:+79851679997">+7 (985) 167-99-97</a></p>
			</div>
		</div>
		<ul class="social-links">
			<li><a href="https://www.instagram.com/legenda_oz_?igsh=ZGpkZWtuNjVyb3F4"><i class="fa fa-instagram"></i></a></li>
			<li><a href="https://vk.com/kafelegendaoz"><i class="fa fa-vk"></i></a></li>
			<li><a href="https://t.me/legenda_oz"><img src="{% static 'img/telegram.png' %}" alt="Telegram" style="width: 16px; height: 16px; filter: invert(1);"></a></li>
			<li><a href="https://eda.yandex.ru/restaurant/kafe_legenda_slw9z"><img src="{% static 'img/yandex-eda.png' %}" alt="Яндекс.Еда" style="width: 16px; height: 16px; filter: invert(1);"></a></li> 
		</ul>
		<p class="copyright">
			&copy; 2024 ИП"Спекторова Г.В."
		</p>
	</div>
	</section>
	
</div><!--wrapper end-->

<script>
document.addEventListener('DOMContentLoaded', function() {
    const form = document.getElementById('feedback-form');
    const successMessage = document.getElementById('success-message');
    const errorMessage = document.getElementById('error-message');

    form.addEventListener('submit', function(e) {
        e.preventDefault();
        
        const formData = new FormData(form);
        const submitButton = form.querySelector('button[type="submit"]');
        submitButton.disabled = true;

        fetch(window.location.href, {
            method: 'POST',
            body: formData,
            headers: {
                'X-CSRFToken': document.querySelector('[name=csrfmiddlewaretoken]').value
            }
        })
        .then(response => response.json())
        .then(data => {
            if (data.status === 'success') {
                form.reset();
                successMessage.style.display = 'block';
                errorMessage.style.display = 'none';
                setTimeout(() => {
                    successMessage.style.display = 'none';
                }, 3000);
            } else {
                errorMessage.style.display = 'block';
                successMessage.style.display = 'none';
                if (data.errors) {
                    const errorText = Object.entries(data.errors)
                        .map(([field, errors]) => `${field}: ${errors.join(', ')}`)
                        .join('\n');
                    errorMessage.textContent = errorText;
                }
            }
        })
        .catch(error => {
            console.error('Error:', error);
            errorMessage.style.display = 'block';
            successMessage.style.display = 'none';
            errorMessage.textContent = 'Произошла ошибка при отправке сообщения';
        })
        .finally(() => {
            submitButton.disabled = false;
        });
    });

    const phoneInput = document.getElementById('id_phone');
    
    // Маска для телефона
    phoneInput.addEventListener('input', function(e) {
        let x = e.target.value.replace(/\D/g, '').match(/(\d{0,1})(\d{0,3})(\d{0,3})(\d{0,2})(\d{0,2})/);
        e.target.value = !x[2] ? x[1] : '+7 (' + x[2] + ') ' + (x[3] ? x[3] + '-' + x[4] : x[3]) + (x[5] ? '-' + x[5] : '');
    });
});
</script>

<style>
.footer {
    background: #222;
    color: #fff;
    padding: 20px 0 15px;
    text-align: center;
}

.footer-info {
    display: flex;
    justify-content: center;
    gap: 30px;
    margin-bottom: 15px;
}

.working-hours, .contact-info {
    text-align: center;
}

.footer-info h4 {
    color: #F39C12;
    font-size: 1.1em;
    margin-bottom: 5px;
    font-weight: 600;
}

.footer-info p {
    color: #fff;
    margin: 0;
    font-size: 1em;
}

.contact-info a {
    color: #fff;
    text-decoration: none;
    transition: color 0.3s ease;
}

.contact-info a:hover {
    color: #F39C12;
}

.social-links {
    list-style: none;
    padding: 0;
    margin: 10px 0;
    display: flex;
    justify-content: center;
    gap: 15px;
}

.social-links li a {
    color: #fff;
    font-size: 1.1em;
    transition: color 0.3s ease;
}

.social-links li a:hover {
    color: #F39C12;
}

.copyright {
    margin-top: 10px;
    color: #888;
    font-size: 0.85em;
}

.gototop {
    margin-bottom: 10px;
}
.content img {
    margin-top: 35px;
}

@media (max-width: 768px) {
    .footer-info {
        flex-direction: column;
        gap: 10px;
    }
    
    .footer {
        padding: 15px 0 10px;
    }
}
</style>

</body>
</html>
{% endblock %}